<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hanzi - Asian Languages</title>
    <!-- Incluimos Bootstrap para el estilo general del layout -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Incluimos tu archivo CSS para estilos personalizados -->
    <link rel="stylesheet" href="style.css">
    <!-- Cargamos la librería Hanzi Writer desde un CDN -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@2.2.2/dist/hanzi-writer.min.js"></script>
</head>
<body>

    <!-- Inicio Header -->
    <header class="bg-dark text-white py-3">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                <h1 class="mb-0">Asian Languages <span class="hanzi">中文</span> & <span class="hangul">한국어</span> & <span class="japanese">日本語</span>.</h1>
                </div>
                <div class="col-md-6">
                    <nav>
                        <ul class="nav justify-content-end">
                            <li class="nav-item"><a class="nav-link text-white" href="index.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link text-white" href="hanzi.html">Hanzi <span class="idioma-chino">汉字</span></a></li>
                            <li class="nav-item"><a class="nav-link text-white" href="hangul.html">Hangul <span class="idioma-coreano">한글</span></a></li>
                            <li class="nav-item"><a class="nav-link text-white" href="japanese.html">Japanese <span class="idioma-japones">日本語</span></a></li>
                            <li class="nav-item"><a class="nav-link text-white" href="aboutus.html">About us</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- Fin Header -->

    <!-- Inicio Contenido Principal -->
    <main class="container my-4">

        <!-- Sección de Introducción Hanzi -->
        <section class="hanzi-introduction text-center mb-5">
            <h2 class="display-4">Hanzi 汉字 to learn <span class="idioma-chino"></span></h2>
            <p class="lead">You can select all the Hanzi you're instrested on and get a PDF to download based on the template you will see on the screen.</p>
        </section>
        <!-- Fin Sección de Introducción Hanzi -->

        <!-- Sección de Ingreso de Caracteres y Cuadrícula -->
        <section class="worksheet mb-5">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="mb-3">
                        <label for="hanzi-input" class="form-label fs-5">Enter Hanzi characters:</label>
                        <input type="text" id="hanzi-input" class="form-control form-control-lg" placeholder="e.g., 你好, 汉字">
                    </div>
                </div>
            </div>

            <!-- Sección de Hoja de Escritura Hanzi -->
            <section class="tian-zi-ge-section text-center">
                <h2 class="mb-4">Hanzi writing worksheet</h2>
                <div id="tian-zi-ge-grid" class="tian-zi-ge-grid d-flex flex-wrap justify-content-center border p-3">
                    <!-- Los cuadrados interactivos se generarán aquí con JavaScript -->
                    <div id="placeholder-message" class="text-muted mt-3">Escribe caracteres chinos para ver la hoja de trabajo.</div>
                </div>
                <!-- Sección de Romanización para Hanzi -->
                <div id="hanzi-romanization-display" class="text-center mt-3 fs-5 text-muted">
                    Romanization:
                </div>
                <!-- Botones para controlar la animación y el PDF -->
                <div class="mt-3">
                    <button id="animate-all" class="btn btn-success me-2">Animate All</button>
                    <button id="download-pdf" class="btn btn-info">Download PDF</button>
                </div>
            </section>
            <!-- Fin Sección de Hoja de Escritura Hanzi -->
        </section>
        <!-- Fin Sección de Ingreso de Caracteres y Cuadrícula -->

        <!-- Sección de Lecciones -->
        <section class="lesson-overview bg-light p-4 rounded mb-5">
            <h3 class="mb-3">Lessons for Chinese 中文</h3>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Introduction for basic brushtokes on Hanzi</li>
                <li class="list-group-item">Pictograms (象形字 - xiàngxíngzì)</li>
                <li class="list-group-item">Simple Indicatives (指事字 - zhǐshìzì)</li>
                <li class="list-group-item">Associative Compounds (会意字 - huìyìzì)</li>
                <li class="list-group-item">Picto-phonetic characters (形声字 - xíngshēngzì)</li>
                <li class="list-group-item">Phonetic Loan characters (假借字 - jiǎjièzì)</li>
                <li class="list-group-item">Mutually Explanatory (转注字 - zhuǎnzhùzì)</li>
            </ul>
            <a href="#" class="btn btn-primary mt-3">I'm still building this up</a>
        </section>
        <!-- Fin Sección de Lecciones -->

    </main>
    <!-- Fin Contenido Principal -->

    <!-- Inicio Footer -->
   <footer class="bg-dark text-white text-center py-3">
        <div class="container">
            <p class="mb-2">&copy; <span id="current-year"></span> All rights reserved, by David.</p>
            <div class="d-flex justify-content-center">
                <img src="Imgs/Xicon.png" alt="X Icon" class="footer-social-icon mx-2" style="width: 30px; height: 30px;">
                <img src="Imgs/fbicon.png" alt="Facebook Icon" class="footer-social-icon mx-2" style="width: 30px; height: 30px;">
                <img src="Imgs/discordicon.png" alt="Discord Icon" class="footer-social-icon mx-2" style="width: 30px; height: 30px;">
                <img src="Imgs/liicon.png" alt="LinkedIn Icon" class="footer-social-icon mx-2" style="width: 30px; height: 30px;">
            </div>
        </div>
    </footer>
    <!-- Fin Footer -->

    <!-- Scripts de Bootstrap y el principal de la aplicación -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        // Script para actualizar el año en el footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // ------------------------------------------------------------------------------------------------
        // Lógica interactiva con Hanzi Writer
        // ------------------------------------------------------------------------------------------------
        
        document.addEventListener('DOMContentLoaded', () => {
            const hanziInput = document.getElementById('hanzi-input');
            const tianZiGeGrid = document.getElementById('tian-zi-ge-grid');
            const animateAllButton = document.getElementById('animate-all');
            const placeholderMessage = document.getElementById('placeholder-message');

            const writers = []; // Almacenará las instancias de Hanzi Writer

            /**
             * Genera los cuadrados interactivos para cada carácter.
             * @param {string} characters Los caracteres a generar.
             */
            const generateHanziSquares = (characters) => {
                tianZiGeGrid.innerHTML = ''; // Limpia la cuadrícula actual
                writers.length = 0; // Limpia el array de escritores

                if (characters.length === 0) {
                    placeholderMessage.style.display = 'block';
                    return;
                } else {
                    placeholderMessage.style.display = 'none';
                }

                // Recorremos cada carácter del texto ingresado
                for (const char of characters) {
                    const squareContainer = document.createElement('div');
                    squareContainer.classList.add('tian-zi-ge-square', 'border', 'border-secondary', 'm-1');

                    // Hanzi Writer necesita un ID único para renderizar el SVG en cada cuadro
                    const squareId = `hanzi-square-${char}-${Date.now()}`;
                    squareContainer.id = squareId;
                    tianZiGeGrid.appendChild(squareContainer);

                    // Crear una nueva instancia de Hanzi Writer para cada cuadro
                    // Si el carácter no tiene datos de trazo, Hanzi Writer mostrará una advertencia en la consola
                    const writer = HanziWriter.create(squareId, char, {
                        width: 100,
                        height: 100,
                        padding: 5,
                        strokeAnimationSpeed: 1, // Velocidad de la animación del trazo
                        delayBetweenStrokes: 100, // Retraso entre trazos
                        onComplete: (data) => {
                            console.log(`Animación de ${data.character} completada.`);
                        }
                    });

                    // Hacer que cada cuadro sea interactivo (se anima al hacer clic)
                    squareContainer.addEventListener('click', () => {
                        writer.animateCharacter();
                    });

                    writers.push(writer); // Guardamos la instancia para poder controlarla más tarde
                }
            };

            // Escucha cambios en el input del usuario
            hanziInput.addEventListener('input', (event) => {
                const hanziText = event.target.value.replace(/\s/g, ''); // Eliminamos los espacios
                generateHanziSquares(hanziText);
            });
            
            // Botón para animar todos los caracteres a la vez
            animateAllButton.addEventListener('click', () => {
                writers.forEach(writer => {
                    writer.animateCharacter();
                });
            });

            // Lógica para el botón de descarga de PDF (Placeholder por ahora)
            document.getElementById('download-pdf').addEventListener('click', () => {
                alert('La funcionalidad para descargar el PDF está en desarrollo. ¡Pronto estará disponible!');
            });

            // Generar algunos cuadrados por defecto al cargar la página
            generateHanziSquares('你好');
        });
    </script>
</body>
</html>
